{% extends "base.html" %}
{% block head %}
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/trajectory.css">
    <script src="../static/CesiumUnminified/Cesium.js"></script>
    <style>
        @import url(../static/CesiumUnminified/Widgets/widgets.css);

        html, body, #cesiumContainer {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
{% endblock %}
{% block title %}Траектория спутника{% endblock %}
{% block content %}

    <div class="maps-container">
        <div id="cesiumContainer"></div>
    </div>

    <script>
        const viewer = new Cesium.Viewer('cesiumContainer', {
            animation: false,  // Скрыть элемент анимации времени
            timeline: false,   // Скрыть элемент временной шкалы
            fullscreenButton: false  // Скрыть кнопку переключения полноэкранного режима
        });

        const positions =
        {{ trajectory|tojson }}.map(coords =>
            Cesium.Cartesian3.fromDegrees(coords[0], coords[1], coords[2])
        );

        const satellitePathEntity = viewer.entities.add({
            polyline: {
                positions: positions,
                width: 2,
                material: Cesium.Color.RED
            }
        });

        const point = viewer.scene.primitives.add(new Cesium.PointPrimitiveCollection()).add({
            position: Cesium.Cartesian3.fromDegrees({{ satellite_lon }}, {{ satellite_lat }}, {{ satellite_alt }}),
            color: Cesium.Color.RED,
            pixelSize: 15,
        });


    </script>

{% endblock %}